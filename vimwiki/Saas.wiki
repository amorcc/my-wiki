
= 方案一 (个人推荐) =
1.(预计7个工作日)UC按照新的架构，完美实现功能
2.(预计两周)B2b暂时不实现webapi，保持现有结构，过滤存储过程，对权限+品类+区域进行过滤
3.完成上面两步之后，开始B2b的真正通过webapi实现SaaS，分步骤有节奏的往上更新
    * 商品中心（3周），按照新架构，全面实现商品中心的新架构，然后切换到B2b站。
                因需要修改很多webapi的内容，第一个分离出来的webapi时间稍长一些
    * 订单中心（2周），按照新架构实现，然后切换
    * 支付中心（2周），
    * 其他 

= 方案二 =
1.(预计7个工作日)UC按照新的架构，完美实现功能
2.(预计1个半月到2个月)将现有的DAL_B2b业务全部搬到webapi当作业务中心层，其他层不实现
    * 修改存储过程实现权限+品类+区域过滤
    * 取消session，使用token进行全站登录
    * 取消asp.net和asp的页面实现方式，
3.逐个拆分业务中心层，按照新架构，实现订单中心、商品中心等。。

= 方案三 = 
1.(预计7个工作日)UC按照新的架构，完美实现功能
2.(预计3个月以上)全面按照新架构，实现B2b的webapi    
    * 修改B2b的c#架构
    * 实现业务中心+业务单元+dal+model层
    * 前端取消session，使用token
    * 前端使用多个webapi获取数据，修改老前端框架
基本等于重新做一遍B2b。
    
= Z买卖Saas实现技术架构思路 =
目标：
# 用户中心SaaS化，独立的webapi
# 现有B2b业务SaaS化，独立的webapi
# 一站登录，通用多产品线
# 以后不存在PC接口和wap站接口两个概念，都是一个接口


新用户中心需要确认的问题：
# svn是否合并成一个，通过建分支的方式维护老系统                                   合并
    * 新版用户中心涉及内容太多，开发周期太长，可能需要维护两个版本
    * 用户中心开发期间的新需求通过分支进行合并
    * 用户中心开发期间的老系统BUG修复通过分支进行合并
# 新用户中心的项目架构                                                            重整
    * 建议减少项目数量，该合并的合并，便于版本维护和开发速度
# 写demo实现c#代码直接调用webapi并获取数据
# 写demo实现本产品调用其他产品接口的队列
# 规划哨兵系统的日志表结构
    * 用户登录日志：登入+登出
    * 用户新增日志
    * 用户权限变更日志：区域码，品类码，菜单权限，操作权限
# 哨兵系统的webapi接口确定
# 用户中心webapi接口确定
    * 登录接口
    * 获取权限信息接口
    * 新增用户接口
    * 新增权限接口
    * 修改权限接口
    * 克隆权限接口
# 修改jquery调用接口的myObj.cmd命令
# 修改vue调用接口的cmd命令
# 表数据上，怎么加区域码、品类码
# 操作权限怎么在前端和后台体现
# 现有的B2b站页面怎么修改？前端怎么配合

疑问
# 是否拆分现有的B2B_DAL，按照用户中心、订单中心等写接口？
# 用户中心是否采用三层架构
# 如果按照产品中心、订单中心这样拆分接口，是每个中心一个接口，还是写到一起？

UC任务拆解
# 现有B2b总共116个类，673个函数(接口)
# 在现有接口的基础上直接修改（新增UC+修改所有数据读取及写入方式）
    # UC数据库及表结构调整（涉及现有的100站和200站loginuser+role+menu）
    # UC权限、角色等业务实现
    # UC前端实现
    # B2b卖家中心现有业务不涉及loginUser接口修改
    # B2b卖家中心涉及loginUser表的业务接口重写（预计不会太多）
    # B2b平台现有业务不涉及loginUser表的接口修改
    # B2b平台涉及loginUser表的接口重写（预计不会太多）
    # B2b卖家广告设置接口重写
    # B2b买家广告接口重写
# 新架构的基础上修改


UC
# 新增用户接口
    * 新增用户时，还像以前那样，先去创建一个角色，然后为新增的用户选择一个角色？还是直接可用勾选菜单权限、品类权限、区域权限？
    * 一个用户登录UC后，只能查看和管理他所创建的用户信息？
    * 一个B用户，他即有B2b的店铺，又有进销存，B用户的公司名称+营业执照等信息，是放到UC里保存，还是放到B2b的数据库里保存
    * UC管理的信息有哪些？
        * 用户名
        * 密码
        * 区域权限
        * 品类权限
        * 菜单和操作权限
        * 用户状态
# 用户列表接口
# 修改用户信息接口
# 修改密码接口
# 忘记密码接口
# 用户登录接口
# 用户退出接口
# 菜单注册接口
# 操作权限注册接口
# 菜单列表接口
# 区域权限设置接口
# 品类权限设置接口
# 获取指定用户菜单和操作权限接口
# 获取指定用户区域权限接口
# 获取指定用户品类权限接口
# 克隆角色接口

买家的接口
# 首页
    * 广告相关
        * 图片轮播广告
        * 中间广告
        * 热销品牌
        * 底部广告
        * 商铺
        * 左下
        * 右下
    * 产品
        * 今日推荐
        * 手机专区
        * DIY专区
    * 新闻
    * 新入住店铺
    * 销售排行
    * 品类信息
    * 热门搜索
    * 店铺信息
# 产品列表页面 ProductList.aspx
    * 品牌
    * 商品搜索列表
        * VProduct.Search
# 促销活动页面 Promotion.aspx
    * PromotionActivity.PromotionProductShowAll
# 购物车页面 MyCartList.aspx
    * 购物车列表
    * 购物车商品+
    * 购物车商品-
    * 购物车商品删除
# 订单预览页
    * 代金券信息
    * 订单预览信息
    * 订单生成
# 
#
#
#
#
#
#
#
#
#
#
#
#
#
#
